var losuj=function(b,a){return Math.floor(Math.random()*(a-b+1))+b};var Game=function(){this.punkty=0;this.zycia=3;this.pytanie;this.ilosc_odpowiedzi=4;this.odpowiedzi=[];this.good_odp;this.koniec_gry=false;this.generuj_pytanie=function(){var g=losuj(0,3);var d=20*losuj(-5,5)+losuj(0,9);var c,e,g;do{c=20*losuj(-5,5)+losuj(0,9)}while(g==3&&c==0);if(g==0){e=d+c;g="+"}else{if(g==1){e=d-c;g="-"}else{if(g==2){e=d*c;g="*"}else{e=d/c;g="/"}}}this.pytanie=d+" "+g+" ";if(c<0){this.pytanie+="("}this.pytanie+=c;if(c<0){this.pytanie+=")"}this.pytanie+=" = ?";this.odpowiedzi=[];this.good_odp=losuj(0,this.ilosc_odpowiedzi-1);for(var f=0;f<this.ilosc_odpowiedzi;f++){if(this.good_odp==f){this.odpowiedzi[f]=e}else{var h;do{h=false;this.odpowiedzi[f]=20*losuj(-5,5)+losuj(0,9);if(g=="*"){this.odpowiedzi[f]*=4*losuj(-40,40)}else{if(g=="/"){this.odpowiedzi[f]/=losuj(3,8)}}this.odpowiedzi[f]=this.odpowiedzi[f];for(var j=0;j<f;j++){if(this.odpowiedzi[f]==this.odpowiedzi[j]||this.odpowiedzi[f]==e){h=true;break}}}while(h)}if(g=="/"){this.odpowiedzi[f]=this.odpowiedzi[f].toFixed(2)}}};this.sprawdz=function(a){if(!this.koniec_gry){if(a==this.good_odp){this.punkty++;alert("Dobra odpowiedź !")}else{this.zycia--;alert("Tracisz życie !")}if(this.zycia==0){this.koniec_gry=true}}}};$(document).ready(function(){var a;var b=function(){$("#zadanie").text(a.pytanie)};var f=function(){for(var g=0;g<a.ilosc_odpowiedzi;g++){$("#p"+g).text(a.odpowiedzi[g])}};var d=function(){$("#punkty").val(a.punkty)};var e=function(){$("#zycie").val(a.zycia)};var c=function(){a.generuj_pytanie();b();f();d();e()};$("#start").click(function(){a=new Game;c()});$(".wyniki").click(function(){if(!a.koniec_gry){a.sprawdz($(this).attr("index"));c()}if(a.koniec_gry){$("#zadanie").html("Koniec Gry <br /> Punkty: "+a.punkty);$(".wyniki").text("")}})});